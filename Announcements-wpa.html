<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Updates - WorkFit</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  
  <!-- PWA Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="WorkFit">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#001f3f">
  
  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- iOS Icons -->
  <link rel="apple-touch-icon" href="icons/icon-152x152.png">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --navy: #001f3f;
      --navy-light: #003366;
      --navy-dark: #001a33;
      --navy-medium: #0a2e57;
      --gold: #FFD700;
      --accent: #C73E1D;
      --light: #F7F7F7;
      --gray: #777777;
      --white: #FFFFFF;
      --text-primary: #222222;
      --text-secondary: #5a5a5a;
      --bg-primary: #ffffff;
      --bg-secondary: #f5f5f5;
      --border-color: #ddd;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --card-bg: #ffffff;
      --success: #4CAF50;
      --error: #f44336;
    }

    /* Dark mode variables */
    [data-theme="dark"] {
      --navy: #0a2e57;
      --navy-light: #1a3e67;
      --navy-dark: #001a33;
      --navy-medium: #0a2e57;
      --gold: #FFD700;
      --accent: #C73E1D;
      --light: #1a1a1a;
      --gray: #aaaaaa;
      --white: #222222;
      --text-primary: #f0f0f0;
      --text-secondary: #cccccc;
      --bg-primary: #121212;
      --bg-secondary: #1a1a1a;
      --border-color: #333333;
      --shadow-color: rgba(0, 0, 0, 0.3);
      --card-bg: #1e1e1e;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background-color: var(--bg-secondary);
      color: var(--text-primary);
      line-height: 1.6;
      font-size: 15px;
      -webkit-text-size-adjust: 100%;
      transition: background-color 0.3s ease, color 0.3s ease;
      padding-bottom: 4rem;
    }

    /* Navigation */
    header {
      background-color: var(--bg-primary);
      box-shadow: 0 2px 10px var(--shadow-color);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    .logo {
      height: 35px;
      width: auto;
    }

    .nav-links {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .nav-links a {
      color: var(--text-primary);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
      font-size: 0.85rem;
      padding: 0.5rem;
    }

    .nav-links a:hover {
      color: var(--gold);
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.3rem;
      color: var(--navy-dark);
      padding: 0.5rem;
      cursor: pointer;
      z-index: 101;
    }

    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 35px;
      height: 35px;
      transition: background-color 0.3s;
    }

    .theme-toggle:hover {
      background-color: rgba(0,0,0,0.1);
    }

    .theme-toggle svg {
      width: 20px;
      height: 20px;
      fill: var(--text-primary);
    }

    /* Page Header */
    .page-header {
      background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .page-header h1 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }

    .page-header p {
      font-size: 1rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Updates Container */
    .updates-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem 2rem;
    }

    .section-title {
      text-align: left;
      margin-bottom: 1.2rem;
      color: var(--navy);
      position: relative;
      font-size: 1.3rem;
      padding-left: 8px;
      border-left: 3px solid var(--gold);
    }

    /* Filter Tabs */
    .filter-tabs {
      display: flex;
      gap: 0.8rem;
      margin-bottom: 1.5rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }

    .filter-tab {
      background: var(--bg-primary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      padding: 0.6rem 1.2rem;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.85rem;
      white-space: nowrap;
      font-weight: 500;
    }

    .filter-tab:hover {
      background: var(--navy-light);
      color: white;
      border-color: var(--navy-light);
    }

    .filter-tab.active {
      background: var(--navy);
      color: white;
      border-color: var(--navy);
    }

    /* Announcement Cards */
    .announcement-card {
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 4px 6px var(--shadow-color);
      margin-bottom: 1.5rem;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .announcement-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 15px var(--shadow-color);
    }

    .announcement-card.urgent {
      border-left: 4px solid var(--accent);
    }

    .announcement-card.important {
      border-left: 4px solid var(--gold);
    }

    .announcement-card.info {
      border-left: 4px solid var(--navy-light);
    }

    .announcement-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .announcement-title {
      font-size: 1.2rem;
      margin-bottom: 0.8rem;
      color: var(--navy);
      font-weight: 600;
    }

    .announcement-meta {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .announcement-category {
      display: inline-block;
      background: var(--gold);
      color: var(--navy);
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .announcement-date {
      color: var(--gray);
      font-size: 0.85rem;
    }

    .announcement-priority {
      display: inline-block;
      padding: 0.3rem 0.8rem;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .announcement-priority.urgent {
      background: var(--accent);
      color: white;
    }

    .announcement-priority.important {
      background: var(--gold);
      color: var(--navy);
    }

    .announcement-priority.info {
      background: var(--navy-light);
      color: white;
    }

    .announcement-body {
      padding: 1.5rem;
    }

    .announcement-content {
      margin-bottom: 1.2rem;
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .announcement-image {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 1.2rem;
      max-height: 200px;
      object-fit: cover;
    }

    /* Hero Slideshow */
    .hero-slideshow {
      position: relative;
      height: 200px;
      overflow: hidden;
      border-radius: 12px;
      margin: 0 1rem 1.5rem 1rem;
    }

    .slides-container {
      height: 100%;
      position: relative;
    }

    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.5s ease;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.5rem;
      color: white;
      background-size: cover;
      background-position: center;
      border-radius: 12px;
    }

    .slide.active {
      opacity: 1;
    }

    .slide-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
      z-index: 1;
      border-radius: 12px;
    }

    .slide-content {
      position: relative;
      z-index: 2;
    }

    .slide-badge {
      display: inline-block;
      background: var(--gold);
      color: var(--navy);
      padding: 0.4rem 0.8rem;
      border-radius: 15px;
      font-size: 0.8rem;
      margin-bottom: 0.8rem;
      font-weight: 600;
    }

    .slide-title {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .slide-description {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .slide-indicators {
      position: absolute;
      bottom: 1rem;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      z-index: 3;
    }

    .slide-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: rgba(255,255,255,0.5);
      cursor: pointer;
      transition: all 0.3s;
    }

    .slide-indicator.active {
      background-color: white;
      transform: scale(1.2);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 3rem 1.5rem;
      color: var(--gray);
    }

    .empty-state i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--border-color);
    }

    .empty-state h3 {
      margin-bottom: 0.5rem;
      color: var(--text-secondary);
      font-size: 1.2rem;
    }

    .empty-state p {
      font-size: 0.95rem;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: var(--bg-primary);
      box-shadow: 0 -2px 10px var(--shadow-color);
      display: flex;
      justify-content: space-around;
      padding: 0.4rem 0;
      z-index: 1000;
    }
    
    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: var(--text-secondary);
      font-size: 0.65rem;
      padding: 0.2rem;
      transition: color 0.3s;
      flex: 1;
      max-width: 25%;
    }
    
    .bottom-nav-item.active {
      color: var(--navy);
    }
    
    .bottom-nav-icon {
      font-size: 1.1rem;
      margin-bottom: 0.1rem;
    }
    
    .bottom-nav-label {
      font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
        position: fixed;
        top: 60px;
        left: 0;
        width: 100%;
        background: var(--navy);
        flex-direction: column;
        padding: 1rem;
        box-shadow: 0 4px 6px var(--shadow-color);
        z-index: 99;
        gap: 0;
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links a {
        padding: 1rem;
        border-bottom: 1px solid var(--border-color);
        width: 100%;
        color: var(--white);
      }

      .mobile-menu-btn {
        display: block;
      }

      .page-header {
        padding: 1.5rem 1rem;
      }

      .page-header h1 {
        font-size: 1.5rem;
      }

      .updates-container {
        padding: 0 0.8rem 2rem;
      }

      .hero-slideshow {
        height: 180px;
        margin: 0 0.8rem 1.2rem 0.8rem;
      }

      .filter-tabs {
        gap: 0.6rem;
      }

      .filter-tab {
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
      }
    }

    @media (max-width: 480px) {
      .hero-slideshow {
        height: 160px;
      }

      .slide {
        padding: 1rem;
      }

      .slide-title {
        font-size: 1.1rem;
      }

      .announcement-header {
        padding: 1.2rem;
      }

      .announcement-body {
        padding: 1.2rem;
      }
    }

    /* PWA standalone mode adjustments */
    @media all and (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: calc(env(safe-area-inset-bottom) + 4rem);
      }

      header {
        padding-top: env(safe-area-inset-top);
      }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <img src="https://i.postimg.cc/9fbXQC1m/Whats-App-Image-2025-10-04-at-06-52-57-removebg-preview-1.png" alt="WorkFit Logo" class="logo">
      <button class="mobile-menu-btn" id="menuBtn">
        <i class="fas fa-bars"></i>
      </button>
      <div class="nav-links" id="navLinks">
        <a href="index.html">Home</a>
        <a href="Blogs.html">Blogs</a>
        <a href="media-wpa.html">Tutorials</a>
        <a href="contact.wpa.html">Contact Us</a>
        <a href="About.html">About Us</a>
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="themeIcon">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/>
          </svg>
        </button>
      </div>
    </nav>
  </header>

  <!-- Page Header -->
  <section class="page-header">
    <h1>Latest Updates</h1>
    <p>Stay informed with the latest news, events, and announcements from WorkFit</p>
  </section>

  <!-- Hero Slideshow -->
  <div class="hero-slideshow">
    <div class="slides-container" id="slidesContainer">
      <!-- Slide 1 -->
      <div class="slide active" style="background-image: url('https://i.postimg.cc/prGQXpbX/FUN-3.png')">
        <div class="slide-overlay"></div>
        <div class="slide-content">
          <span class="slide-badge">Event Update</span>
          <h3 class="slide-title">The Fun Run is On!!</h3>
          <p class="slide-description">Scheduled for Nov 1st</p>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80')">
        <div class="slide-overlay"></div>
        <div class="slide-content">
          <span class="slide-badge">New Challenge</span>
          <h3 class="slide-title">October Fitness Challenges Are Live!</h3>
          <p class="slide-description">Join now and track your progress</p>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="slide" style="background-image: url('https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1340&q=80')">
        <div class="slide-overlay"></div>
        <div class="slide-content">
          <span class="slide-badge">New Location</span>
          <h3 class="slide-title">Welcome Uthiru Furnace!</h3>
          <p class="slide-description">Opened on July 7th</p>
        </div>
      </div>
    </div>
    
    <div class="slide-indicators" id="slideIndicators">
      <!-- Indicators will be added by JavaScript -->
    </div>
  </div>

  <!-- Updates Container -->
  <div class="updates-container">
    <h2 class="section-title">All Updates</h2>
    
    <div class="filter-tabs">
      <button class="filter-tab active" data-filter="all">All Updates</button>
      <button class="filter-tab" data-filter="urgent">Urgent</button>
      <button class="filter-tab" data-filter="important">Important</button>
      <button class="filter-tab" data-filter="events">Events</button>
      <button class="filter-tab" data-filter="challenges">Challenges</button>
    </div>

    <!-- Announcements List -->
    <div id="announcementsList">
      <!-- Urgent Announcement -->
      <div class="announcement-card urgent" data-category="urgent" data-priority="urgent">
        <div class="announcement-header">
          <h3 class="announcement-title">üö® The Fun Run is On!!</h3>
          <div class="announcement-meta">
            <span class="announcement-category">Event Update</span>
            <span class="announcement-date">Oct 5, 2025</span>
            <span class="announcement-priority urgent">Urgent</span>
          </div>
        </div>
        <div class="announcement-body">
          <div class="announcement-content">
            <p>The run is still on as scheduled for Saturday, 1st November 2025, starting at 9:00 AM. The event will be held at the Jaffery's Sports Club in Lavington.</p>
            <p>All members are encouraged to register to secure their spot. This is a great opportunity for team building and fitness celebration!</p>
          </div>
        </div>
      </div>

      <!-- Important Announcement -->
      <div class="announcement-card important" data-category="challenges" data-priority="important">
        <div class="announcement-header">
          <h3 class="announcement-title">üèÜ October Fitness Challenges Are Live!</h3>
          <div class="announcement-meta">
            <span class="announcement-category">Monthly Challenge</span>
            <span class="announcement-date">Oct 1, 2025</span>
            <span class="announcement-priority important">Important</span>
          </div>
        </div>
        <div class="announcement-body">
          <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="October Challenges" class="announcement-image">
          <div class="announcement-content">
            <p>Get ready to push your limits this October! We've launched three exciting challenges:</p>
            <ul>
              <li><strong>Mountain Climbers Challenge:</strong> 3,000 reps this month</li>
              <li><strong>Plank Hold Challenge:</strong> 60 minutes total plank time</li>
              <li><strong>Step Up Challenge:</strong> 300,000 steps collectively</li>
            </ul>
            <p>Track your progress and compete for the top spots on our leaderboard! Perfect for team building and individual growth.</p>
          </div>
        </div>
      </div>

      <!-- Information Announcement -->
      <div class="announcement-card info" data-category="general" data-priority="info">
        <div class="announcement-header">
          <h3 class="announcement-title">üì¢ Updated Session Schedule</h3>
          <div class="announcement-meta">
            <span class="announcement-category">Schedule Update</span>
            <span class="announcement-date">Sep 25, 2025</span>
            <span class="announcement-priority info">Information</span>
          </div>
        </div>
        <div class="announcement-body">
          <div class="announcement-content">
            <p>Starting November 1st, we're making adjustments to our session schedule to better serve our growing community:</p>
            <p><strong>New Morning Sessions:</strong></p>
            <ul>
              <li>Uthiru Furnace: 5:00 AM - 6:30 AM (Mon, Wed, Fri)</li>
              <li>Wangige Furnace: 5:00 AM - 6:30 AM (Tue, Thu, Sat)</li>
              <li>Weekend Bootcamp: 7:00 AM - 8:30 AM (Saturdays)</li>
            </ul>
            <p><strong>New Evening Option:</strong></p>
            <ul>
              <li>Uthiru Furnace: 6:00 PM - 7:30 PM (Tue, Thu)</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- New Furnace Announcement -->
      <div class="announcement-card info" data-category="general" data-priority="info">
        <div class="announcement-header">
          <h3 class="announcement-title">üéâ Welcome Wangige Furnace!</h3>
          <div class="announcement-meta">
            <span class="announcement-category">New Location</span>
            <span class="announcement-date">Sep 15, 2025</span>
            <span class="announcement-priority info">Information</span>
          </div>
        </div>
        <div class="announcement-body">
          <img src="https://alaninkenya.org/wordpress/wp-content/uploads/2011/12/swing_ride_uthiru.jpg" alt="Wangige Furnace" class="announcement-image">
          <div class="announcement-content">
            <p>We're excited to announce the opening of our newest WorkFit location in Wangige! This expansion brings our proven fitness programs to more communities.</p>
            <p><strong>Location Details:</strong></p>
            <ul>
              <li>Address: Wangige Roundabout Area</li>
              <li>Opening Date: November 3, 2025</li>
              <li>Session Times: Tuesdays, Thursdays, Saturdays (5:00 AM - 6:30 AM)</li>
            </ul>
            <p>Join us in welcoming our newest fitness community!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State (hidden by default) -->
    <div class="empty-state" id="emptyState" style="display: none;">
      <i class="fas fa-bell-slash"></i>
      <h3>No Updates Found</h3>
      <p>There are no updates matching your current filter.</p>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="index.html" class="bottom-nav-item">
      <i class="fas fa-home bottom-nav-icon"></i>
      <span class="bottom-nav-label">Home</span>
    </a>
    <a href="Announcements-wpa.html" class="bottom-nav-item active">
      <i class="fas fa-bullhorn bottom-nav-icon"></i>
      <span class="bottom-nav-label">Updates</span>
    </a>
    <a href="plans-wpa.html" class="bottom-nav-item">
      <i class="fas fa-running bottom-nav-icon"></i>
      <span class="bottom-nav-label">Our Plans</span>
    </a>
    <a href="Store.html" class="bottom-nav-item">
      <i class="fas fa-store bottom-nav-icon"></i>
      <span class="bottom-nav-label">Store</span>
    </a>
  </nav>

  <script>
    // Theme Management
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const htmlElement = document.documentElement;
    
    // Check for saved theme preference or use system preference
    const savedTheme = localStorage.getItem('theme');
    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    // Set initial theme
    if (savedTheme) {
      htmlElement.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);
    } else if (systemPrefersDark) {
      htmlElement.setAttribute('data-theme', 'dark');
      updateThemeIcon('dark');
    }
    
    // Theme toggle functionality
    themeToggle.addEventListener('click', function() {
      const currentTheme = htmlElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      htmlElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
    });
    
    function updateThemeIcon(theme) {
      if (!themeIcon) return;
      
      if (theme === 'dark') {
        themeIcon.innerHTML = '<path d="M0 0h24v24H0z" fill="none"/><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/>';
      } else {
        themeIcon.innerHTML = '<path d="M0 0h24v24H0z" fill="none"/><path d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/>';
      }
    }
    
    // Listen for system theme changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if (!localStorage.getItem('theme')) {
        const newTheme = e.matches ? 'dark' : 'light';
        htmlElement.setAttribute('data-theme', newTheme);
        updateThemeIcon(newTheme);
      }
    });

    // Mobile Menu Toggle
    const menuBtn = document.getElementById('menuBtn');
    const navLinks = document.getElementById('navLinks');
    
    if (menuBtn && navLinks) {
      menuBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        navLinks.classList.toggle('active');
        
        const icon = menuBtn.querySelector('i');
        if (navLinks.classList.contains('active')) {
          icon.classList.remove('fa-bars');
          icon.classList.add('fa-times');
        } else {
          icon.classList.remove('fa-times');
          icon.classList.add('fa-bars');
        }
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!navLinks.contains(e.target) && !menuBtn.contains(e.target) && navLinks.classList.contains('active')) {
          navLinks.classList.remove('active');
          const icon = menuBtn.querySelector('i');
          icon.classList.remove('fa-times');
          icon.classList.add('fa-bars');
        }
      });
      
      // Prevent clicks inside nav from closing it
      navLinks.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    }

    // Hero Slideshow Functionality
    const slidesContainer = document.getElementById('slidesContainer');
    const slides = document.querySelectorAll('.slide');
    const slideIndicators = document.getElementById('slideIndicators');
    let currentSlide = 0;
    let slideInterval;

    // Create indicators
    slides.forEach((_, index) => {
      const indicator = document.createElement('div');
      indicator.classList.add('slide-indicator');
      if (index === 0) indicator.classList.add('active');
      indicator.addEventListener('click', () => {
        goToSlide(index);
      });
      slideIndicators.appendChild(indicator);
    });

    function goToSlide(index) {
      // Update slides
      slides.forEach(slide => slide.classList.remove('active'));
      slides[index].classList.add('active');
      
      // Update indicators
      document.querySelectorAll('.slide-indicator').forEach((indicator, i) => {
        if (i === index) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });
      
      currentSlide = index;
      
      // Reset auto-slide timer
      resetSlideInterval();
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      goToSlide(currentSlide);
    }

    function startSlideInterval() {
      slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
    }

    function resetSlideInterval() {
      clearInterval(slideInterval);
      startSlideInterval();
    }

    // Pause on hover/touch
    slidesContainer.addEventListener('mouseenter', () => clearInterval(slideInterval));
    slidesContainer.addEventListener('mouseleave', startSlideInterval);
    slidesContainer.addEventListener('touchstart', () => clearInterval(slideInterval));
    slidesContainer.addEventListener('touchend', startSlideInterval);

    // Announcement Filtering
    const filterTabs = document.querySelectorAll('.filter-tab');
    const announcements = document.querySelectorAll('.announcement-card');
    const emptyState = document.getElementById('emptyState');
    
    filterTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        const filter = this.dataset.filter;
        
        // Update active tab
        filterTabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        
        // Filter announcements
        let visibleCount = 0;
        announcements.forEach(announcement => {
          const category = announcement.dataset.category;
          const priority = announcement.dataset.priority;
          
          if (filter === 'all' || category === filter || priority === filter) {
            announcement.style.display = 'block';
            visibleCount++;
          } else {
            announcement.style.display = 'none';
          }
        });
        
        // Show empty state if no announcements match the filter
        if (visibleCount === 0) {
          emptyState.style.display = 'block';
        } else {
          emptyState.style.display = 'none';
        }
      });
    });

    // Initialize
    startSlideInterval();
  </script>
</body>
</html>